<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>1週目 練習用キット（CSS & JSアニメーション基礎）</title>
  <style>
    :root{
      --bg:#0f172a;--fg:#e2e8f0;--muted:#94a3b8;--accent:#38bdf8;--card:#111827;--shadow:0 10px 30px rgba(0,0,0,.25);
    }
    html,body{height:100%;}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans JP","Hiragino Kaku Gothic ProN","メイリオ",sans-serif;background:linear-gradient(180deg,#0f172a,#111827);color:var(--fg);}
    header{max-width:1100px;margin:40px auto 10px;padding:0 16px}
    main{max-width:1100px;margin:0 auto 80px;padding:0 16px;display:grid;gap:28px}
    section.card{background:var(--card);border:1px solid #1f2937;border-radius:16px;box-shadow:var(--shadow);padding:20px}
    h1{font-size:clamp(1.4rem,1rem+2vw,2.2rem);margin:.2rem 0 1rem}
    h2{font-size:1.2rem;margin:.2rem 0 .8rem}
    p{color:var(--muted)}
    code{background:#0b1220;padding:.2em .4em;border-radius:6px}

    /* ---------- 1) CSS Transition 基礎 ---------- */
    .btn-area{display:flex;flex-wrap:wrap;gap:12px}
    .btn{
      appearance:none;border:1px solid #334155;background:#0b1220;color:var(--fg);
      padding:10px 14px;border-radius:12px;cursor:pointer;transition:transform .55s ease, background .25s ease, box-shadow .25s ease;
    }
    .btn:hover{transform:translateY(-2px) scale(1.12);background:#888;box-shadow:5px 10px 20px rgba(f,f,f,.5)}

    /* 演習: ここを編集して、色や影、拡大率を変えてみましょう */

    /* ---------- 2) CSS Keyframes 基礎 ---------- */
    .pulse-box{width:120px;height:120px;border-radius:16px;background:#0b1220;border:1px solid #334155;display:grid;place-items:center;margin-top:10px}
    .pulse{animation:pulse 1.2s ease-in-out infinite}
    @keyframes pulse{
      0%{transform:scale(1); box-shadow:0 0 0 rgba(56,189,248,0)}
      50%{transform:scale(1.06); box-shadow:0 0 30px rgba(56,189,248,.35)}
      100%{transform:scale(1); box-shadow:0 0 0 rgba(56,189,248,0)}
    }

    /* ---------- 3) JS で開始/停止（class の付け外し） ---------- */
    .toggle-target{width:140px;height:140px;border-radius:20px;background:#0b1220;border:1px dashed #475569;display:grid;place-items:center}
    .is-active{animation:bounceY .8s cubic-bezier(.2,.7,.2,1) infinite}
    @keyframes bounceY{0%,100%{transform:translateY(0)}50%{transform:translateY(-16px)}}

    /* ---------- 4) requestAnimationFrame サンプル ---------- */
    .raf-stage{position:relative;height:120px;border:1px solid #334155;border-radius:12px;overflow:hidden;background:#0b1220}
    .raf-dot{position:absolute;inset:auto auto 14px 14px;width:18px;height:18px;border-radius:999px;background:var(--accent)}

    /* ---------- 5) スクロールでフェードイン（IntersectionObserver） ---------- */
    .reveal{opacity:0; transform:translateY(18px); transition:opacity .6s ease, transform .6s ease}
    .reveal.is-shown{opacity:1; transform:none}

    /* 練習用デモ要素 */
    .grid-demo{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px;margin-top:14px}
    .card-small{background:#0c1424;border:1px solid #1f2a3a;border-radius:10px;padding:12px;height:90px}
  </style>
</head>
<body>
  <header>
    <h1>1週目 練習用キット（CSS & JS アニメーション基礎）</h1>
    <p>このファイルだけで各項目を練習できます。各セクションの <strong>演習TODO</strong> をこなしながらコードを書き換えてください。</p>
  </header>
  <main>
    <!-- 1) Transition -->
    <section class="card">
      <h2>1) CSS Transition（ホバー演出）</h2>
      <p>ボタンの色・拡大・影などを <code>transition</code> で滑らかに。<br><strong>演習TODO:</strong> 拡大率、影の強さ、easing、delay を変更して好みのホバーに調整。</p>
      <div class="btn-area">
        <button class="btn">Hover me</button>
        <button class="btn">Primary</button>
        <button class="btn">Ghost</button>
      </div>
    </section>

    <!-- 2) Keyframes -->
    <section class="card">
      <h2>2) CSS Keyframes（鼓動アニメ）</h2>
      <p><code>@keyframes</code> で自由なモーションを作成。<br><strong>演習TODO:</strong> 色を変化させる、スケール幅を大きくする、速度を変える（1.2s → 2s）。</p>
      <div class="pulse-box pulse">PULSE</div>
    </section>

    <!-- 3) JSで開始/停止 -->
    <section class="card">
      <h2>3) JSで開始/停止（classの付け外し）</h2>
      <p>ボタンで <code>.is-active</code> を付け外ししてアニメを制御。<br><strong>演習TODO:</strong> 開始/停止に加えて「速度を2倍」「色を切替」ボタンを追加。</p>
      <div style="display:flex; gap:12px; align-items:center; flex-wrap:wrap">
        <div id="toggleTarget" class="toggle-target">bounce</div>
        <div style="display:flex; gap:8px; flex-wrap:wrap">
          <button id="startBtn" class="btn">開始</button>
          <button id="stopBtn" class="btn">停止</button>
        </div>
      </div>
    </section>

    <!-- 4) requestAnimationFrame -->
    <section class="card">
      <h2>4) requestAnimationFrame（自力で動かす）</h2>
      <p>毎フレーム座標を更新する基本。<br><strong>演習TODO:</strong> 往復運動、加速/減速、複数ドットの同時アニメに拡張。</p>
      <div class="raf-stage" id="rafStage">
        <div class="raf-dot" id="rafDot" aria-hidden="true"></div>
      </div>
      <div style="display:flex; gap:8px; margin-top:8px; flex-wrap:wrap">
        <button id="rafStart" class="btn">再生</button>
        <button id="rafPause" class="btn">一時停止</button>
        <button id="rafReset" class="btn">リセット</button>
      </div>
    </section>

    <!-- 5) スクロールでフェードイン -->
    <section class="card">
      <h2>5) スクロールでフェードイン（IntersectionObserver）</h2>
      <p>画面に入ったら <code>.is-shown</code> を付与して表示。<br><strong>演習TODO:</strong> しきい値・rootMarginを調整、段階的ディレイを追加、下からだけでなく左右からも。</p>
      <div class="grid-demo">
        <div class="card-small reveal">Box A</div>
        <div class="card-small reveal">Box B</div>
        <div class="card-small reveal">Box C</div>
        <div class="card-small reveal">Box D</div>
        <div class="card-small reveal">Box E</div>
        <div class="card-small reveal">Box F</div>
      </div>
    </section>
  </main>

  <script>
    // ============ 3) JSで開始/停止（classの付け外し） ============
    const target = document.getElementById('toggleTarget');
    document.getElementById('startBtn').addEventListener('click', () => target.classList.add('is-active'));
    document.getElementById('stopBtn').addEventListener('click', () => target.classList.remove('is-active'));

    // ============ 4) requestAnimationFrame サンプル ============
    const dot = document.getElementById('rafDot');
    const stage = document.getElementById('rafStage');
    let rafId = null; let t = 0; let playing = false;

    function tick(){
      // t を進めて位置を計算（0→1 の三角波で横移動）
      t += 0.008; if (t > 1) t = 0;
      const w = stage.clientWidth - 32; // 余白を考慮
      const x = Math.abs( (t*2)%2 - 1 ) * w; // 0→w→0 の往復
      dot.style.transform = `translate(${x}px,0)`;
      if (playing) rafId = requestAnimationFrame(tick);
    }

    const startRaf = () => { if (!playing){ playing = true; rafId = requestAnimationFrame(tick);} };
    const pauseRaf = () => { playing = false; if (rafId) cancelAnimationFrame(rafId); };
    const resetRaf = () => { pauseRaf(); t = 0; dot.style.transform = 'translate(0,0)'; };

    document.getElementById('rafStart').addEventListener('click', startRaf);
    document.getElementById('rafPause').addEventListener('click', pauseRaf);
    document.getElementById('rafReset').addEventListener('click', resetRaf);

    // ============ 5) IntersectionObserver（スクロールでフェードイン） ============
    const items = document.querySelectorAll('.reveal');
    const io = new IntersectionObserver((entries)=>{
      entries.forEach((en)=>{
        if (en.isIntersecting){
          en.target.classList.add('is-shown');
          io.unobserve(en.target); // 一度だけ
        }
      });
    }, { threshold: 0.15, rootMargin: '0px 0px -40px 0px' });
    items.forEach(el => io.observe(el));
  </script>
</body>
</html>
