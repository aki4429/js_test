<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Canvas ã®ä»•çµ„ã¿</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      line-height: 1.6;
      margin: 0;
      padding: 20px;
      background: #f5f5f5;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h1 { color: #2c3e50; border-bottom: 3px solid #3498db; padding-bottom: 10px; }
    h2 { color: #34495e; margin-top: 30px; }
    h3 { color: #7f8c8d; }
    .demo-section {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 8px;
      margin: 20px 0;
      border-left: 4px solid #3498db;
    }
    canvas {
      border: 2px solid #ddd;
      margin: 10px;
      display: block;
    }
    code {
      background: #2c3e50;
      color: #ecf0f1;
      padding: 2px 6px;
      border-radius: 3px;
      font-family: 'Courier New', monospace;
    }
    .code-block {
      background: #2c3e50;
      color: #ecf0f1;
      padding: 15px;
      border-radius: 5px;
      overflow-x: auto;
      margin: 10px 0;
    }
    .important {
      background: #fff3cd;
      border: 1px solid #ffeaa7;
      padding: 15px;
      border-radius: 5px;
      margin: 15px 0;
    }
    .grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      align-items: start;
    }
    button {
      background: #3498db;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      margin: 5px;
    }
    button:hover { background: #2980b9; }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ¨ Canvas ã®ä»•çµ„ã¿å®Œå…¨ã‚¬ã‚¤ãƒ‰</h1>

    <h2>1. Canvasã¨ã¯ä½•ã‹</h2>
    <p>Canvasã¯HTML5ã§å°å…¥ã•ã‚ŒãŸã€<strong>ãƒ”ã‚¯ã‚»ãƒ«å˜ä½ã§æç”»ã§ãã‚‹é ˜åŸŸ</strong>ã§ã™ã€‚ã¾ã•ã«ã€Œãƒ‡ã‚¸ã‚¿ãƒ«ã®ã‚­ãƒ£ãƒ³ãƒã‚¹ã€ã¨ã—ã¦æ©Ÿèƒ½ã—ã¾ã™ã€‚</p>
    
    <div class="important">
      <strong>é‡è¦ãªæ¦‚å¿µ:</strong> Canvasã¯HTMLã® <code>&lt;canvas&gt;</code> è¦ç´ ã¨ã€JavaScriptã®æç”»APIã®çµ„ã¿åˆã‚ã›ã§ã™ã€‚
    </div>

    <h2>2. åŸºæœ¬çš„ãªä»•çµ„ã¿</h2>
    
    <h3>ğŸ“‹ HTMLéƒ¨åˆ†</h3>
    <div class="code-block">
&lt;canvas id="myCanvas" width="400" height="300"&gt;&lt;/canvas&gt;
    </div>

    <h3>ğŸ–¼ï¸ JavaScriptéƒ¨åˆ†</h3>
    <div class="code-block">
const canvas = document.getElementById('myCanvas');
const ctx = canvas.getContext('2d');  // æç”»ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’å–å¾—
    </div>

    <div class="demo-section">
      <h3>å®Ÿéš›ã®ä¾‹: åŸºæœ¬å›³å½¢æç”»</h3>
      <div class="grid">
        <div>
          <canvas id="basicCanvas" width="300" height="200"></canvas>
          <br>
          <button onclick="drawBasicShapes()">åŸºæœ¬å›³å½¢ã‚’æç”»</button>
          <button onclick="clearBasic()">ã‚¯ãƒªã‚¢</button>
        </div>
        <div>
          <div class="code-block" style="font-size: 12px;">
function drawBasicShapes() {
  const canvas = document.getElementById('basicCanvas');
  const ctx = canvas.getContext('2d');
  
  // çŸ©å½¢
  ctx.fillStyle = 'red';
  ctx.fillRect(10, 10, 80, 60);
  
  // å††
  ctx.beginPath();
  ctx.arc(150, 40, 30, 0, Math.PI * 2);
  ctx.fillStyle = 'blue';
  ctx.fill();
  
  // ç·š
  ctx.beginPath();
  ctx.moveTo(200, 20);
  ctx.lineTo(280, 80);
  ctx.strokeStyle = 'green';
  ctx.lineWidth = 3;
  ctx.stroke();
}
          </div>
        </div>
      </div>
    </div>

    <h2>3. æç”»ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼ˆContextï¼‰ã®ä»•çµ„ã¿</h2>
    <p>Canvasã«æç”»ã™ã‚‹ã«ã¯<strong>ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ</strong>ãŒå¿…è¦ã§ã™ã€‚ã“ã‚Œã¯ã€Œæç”»ãƒ„ãƒ¼ãƒ«ã€ã®ã‚ˆã†ãªã‚‚ã®ã§ã™ã€‚</p>

    <div class="grid">
      <div>
        <h3>ğŸ¨ 2Dã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ</h3>
        <ul>
          <li><code>getContext('2d')</code></li>
          <li>å¹³é¢çš„ãªæç”»</li>
          <li>å›³å½¢ã€ãƒ†ã‚­ã‚¹ãƒˆã€ç”»åƒãªã©</li>
        </ul>
      </div>
      <div>
        <h3>ğŸŒ 3Dã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ</h3>
        <ul>
          <li><code>getContext('webgl')</code></li>
          <li>3Dæç”»ï¼ˆWebGLï¼‰</li>
          <li>ã‚ˆã‚Šé«˜åº¦ã§è¤‡é›‘</li>
        </ul>
      </div>
    </div>

    <h2>4. åº§æ¨™ç³»ã®ä»•çµ„ã¿</h2>
    <div class="demo-section">
      <h3>Canvasåº§æ¨™ç³»ã®å¯è¦–åŒ–</h3>
      <div class="grid">
        <div>
          <canvas id="coordinateCanvas" width="300" height="200"></canvas>
          <br>
          <button onclick="showCoordinates()">åº§æ¨™ç³»ã‚’è¡¨ç¤º</button>
        </div>
        <div>
          <p><strong>é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ:</strong></p>
          <ul>
            <li>å·¦ä¸ŠãŒåŸç‚¹ (0, 0)</li>
            <li>Xè»¸: å³æ–¹å‘ãŒæ­£ã®å€¤</li>
            <li>Yè»¸: <strong>ä¸‹æ–¹å‘ãŒæ­£ã®å€¤</strong></li>
            <li>æ•°å­¦ã®åº§æ¨™ç³»ã¨Yè»¸ãŒé€†ï¼</li>
          </ul>
        </div>
      </div>
    </div>

    <h2>5. æç”»ã®ä»•çµ„ã¿ï¼ˆã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«ï¼‰</h2>
    <p>Canvasã¯<strong>ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«</strong>ã§ã™ã€‚ã¤ã¾ã‚Šã€è¨­å®šã—ãŸæç”»çŠ¶æ…‹ãŒæ¬¡ã®æç”»ã¾ã§ä¿æŒã•ã‚Œã¾ã™ã€‚</p>

    <div class="demo-section">
      <h3>ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«ã®å‹•ä½œä¾‹</h3>
      <div class="grid">
        <div>
          <canvas id="stateCanvas" width="300" height="150"></canvas>
          <br>
          <button onclick="demonstrateState()">ã‚¹ãƒ†ãƒ¼ãƒˆã®å‹•ä½œã‚’ç¢ºèª</button>
        </div>
        <div>
          <div class="code-block" style="font-size: 12px;">
// ä¸€åº¦è¨­å®šã—ãŸè‰²ã¯ä¿æŒã•ã‚Œã‚‹
ctx.fillStyle = 'red';
ctx.fillRect(10, 10, 50, 50);  // èµ¤
ctx.fillRect(70, 10, 50, 50);  // ã¾ã èµ¤

// æ–°ã—ã„è‰²ã‚’è¨­å®š
ctx.fillStyle = 'blue';
ctx.fillRect(130, 10, 50, 50); // é’
          </div>
        </div>
      </div>
    </div>

    <h2>6. ãƒ‘ã‚¹ã®ä»•çµ„ã¿</h2>
    <p>è¤‡é›‘ãªå›³å½¢ã‚’æãã¨ãã¯<strong>ãƒ‘ã‚¹</strong>ã‚’ä½¿ã„ã¾ã™ã€‚ã“ã‚Œã¯ã€Œè¨­è¨ˆå›³ã€ã‚’ä½œã£ã¦ã‹ã‚‰æç”»ã™ã‚‹æ–¹æ³•ã§ã™ã€‚</p>

    <div class="demo-section">
      <h3>ãƒ‘ã‚¹ã‚’ä½¿ã£ãŸæç”»</h3>
      <div class="grid">
        <div>
          <canvas id="pathCanvas" width="300" height="150"></canvas>
          <br>
          <button onclick="drawWithPath()">ãƒ‘ã‚¹ã§æç”»</button>
          <button onclick="clearPath()">ã‚¯ãƒªã‚¢</button>
        </div>
        <div>
          <div class="code-block" style="font-size: 12px;">
// ãƒ‘ã‚¹ã®åŸºæœ¬çš„ãªæµã‚Œ
ctx.beginPath();        // æ–°ã—ã„ãƒ‘ã‚¹é–‹å§‹
ctx.moveTo(50, 50);     // é–‹å§‹ç‚¹
ctx.lineTo(150, 50);    // ç·šã‚’å¼•ã
ctx.lineTo(100, 100);   // ä¸‰è§’å½¢ã®é ‚ç‚¹
ctx.closePath();        // ãƒ‘ã‚¹ã‚’é–‰ã˜ã‚‹
ctx.stroke();           // å®Ÿéš›ã«æç”»
          </div>
        </div>
      </div>
    </div>

    <h2>7. ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ä»•çµ„ã¿</h2>
    <p>ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã¯<strong>æç”»â†’ã‚¯ãƒªã‚¢â†’æç”»</strong>ã®ç¹°ã‚Šè¿”ã—ã§ã™ã€‚</p>

    <div class="demo-section">
      <h3>ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®åŸºæœ¬æ§‹é€ </h3>
      <div class="grid">
        <div>
          <canvas id="animCanvas" width="300" height="150"></canvas>
          <br>
          <button onclick="startAnimation()">ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹</button>
          <button onclick="stopAnimation()">åœæ­¢</button>
        </div>
        <div>
          <div class="code-block" style="font-size: 12px;">
let x = 0;
let animationId;

function animate() {
  // 1. ã‚¯ãƒªã‚¢
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  
  // 2. ä½ç½®æ›´æ–°
  x += 2;
  if (x > canvas.width) x = -50;
  
  // 3. æç”»
  ctx.fillStyle = 'red';
  ctx.fillRect(x, 50, 50, 50);
  
  // 4. æ¬¡ã®ãƒ•ãƒ¬ãƒ¼ãƒ äºˆç´„
  animationId = requestAnimationFrame(animate);
}
          </div>
        </div>
      </div>
    </div>

    <h2>8. ã‚ˆãä½¿ç”¨ã•ã‚Œã‚‹æç”»ãƒ¡ã‚½ãƒƒãƒ‰</h2>
    <div class="demo-section">
      <div class="grid">
        <div>
          <h3>å›³å½¢æç”»</h3>
          <ul>
            <li><code>fillRect()</code> - å¡—ã‚Šã¤ã¶ã—çŸ©å½¢</li>
            <li><code>strokeRect()</code> - æ ç·šçŸ©å½¢</li>
            <li><code>arc()</code> - å††ãƒ»å††å¼§</li>
            <li><code>ellipse()</code> - æ¥•å††</li>
          </ul>
        </div>
        <div>
          <h3>ãƒ‘ã‚¹æ“ä½œ</h3>
          <ul>
            <li><code>beginPath()</code> - ãƒ‘ã‚¹é–‹å§‹</li>
            <li><code>moveTo()</code> - ç§»å‹•</li>
            <li><code>lineTo()</code> - ç·šæç”»</li>
            <li><code>closePath()</code> - ãƒ‘ã‚¹é–‰ã˜ã‚‹</li>
          </ul>
        </div>
      </div>
    </div>

    <h2>9. é‡è¦ãªæ¦‚å¿µï¼šå³åº§æç”» vs é…å»¶æç”»</h2>
    <div class="important">
      <p><strong>å³åº§æç”»:</strong> <code>fillRect()</code>, <code>fillText()</code> ãªã©</p>
      <p><strong>é…å»¶æç”»:</strong> <code>beginPath()</code> â†’ ãƒ‘ã‚¹ä½œæˆ â†’ <code>fill()</code>/<code>stroke()</code></p>
    </div>

    <h2>10. å®Ÿè·µä¾‹ï¼šã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–æç”»</h2>
    <div class="demo-section">
      <h3>ãƒã‚¦ã‚¹ã§æç”»ã—ã¦ã¿ã‚ˆã†</h3>
      <canvas id="drawCanvas" width="400" height="200" style="cursor: crosshair;"></canvas>
      <br>
      <button onclick="clearDraw()">ã‚¯ãƒªã‚¢</button>
      <select id="colorSelect">
        <option value="black">é»’</option>
        <option value="red">èµ¤</option>
        <option value="blue">é’</option>
        <option value="green">ç·‘</option>
      </select>
    </div>

  </div>

  <script>
    // åŸºæœ¬å›³å½¢æç”»
    function drawBasicShapes() {
      const canvas = document.getElementById('basicCanvas');
      const ctx = canvas.getContext('2d');
      
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      // çŸ©å½¢
      ctx.fillStyle = 'red';
      ctx.fillRect(10, 10, 80, 60);
      
      // å††
      ctx.beginPath();
      ctx.arc(150, 40, 30, 0, Math.PI * 2);
      ctx.fillStyle = 'blue';
      ctx.fill();
      
      // ç·š
      ctx.beginPath();
      ctx.moveTo(200, 20);
      ctx.lineTo(280, 80);
      ctx.strokeStyle = 'green';
      ctx.lineWidth = 3;
      ctx.stroke();
    }

    function clearBasic() {
      const canvas = document.getElementById('basicCanvas');
      const ctx = canvas.getContext('2d');
      ctx.clearRect(0, 0, canvas.width, canvas.height);
    }

    // åº§æ¨™ç³»è¡¨ç¤º
    function showCoordinates() {
      const canvas = document.getElementById('coordinateCanvas');
      const ctx = canvas.getContext('2d');
      
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      // ã‚°ãƒªãƒƒãƒ‰æç”»
      ctx.strokeStyle = '#ddd';
      ctx.lineWidth = 1;
      
      for (let x = 0; x <= canvas.width; x += 20) {
        ctx.beginPath();
        ctx.moveTo(x, 0);
        ctx.lineTo(x, canvas.height);
        ctx.stroke();
      }
      
      for (let y = 0; y <= canvas.height; y += 20) {
        ctx.beginPath();
        ctx.moveTo(0, y);
        ctx.lineTo(canvas.width, y);
        ctx.stroke();
      }
      
      // è»¸
      ctx.strokeStyle = 'black';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(0, 0);
      ctx.lineTo(canvas.width, 0);
      ctx.moveTo(0, 0);
      ctx.lineTo(0, canvas.height);
      ctx.stroke();
      
      // åŸç‚¹ãƒãƒ¼ã‚¯
      ctx.fillStyle = 'red';
      ctx.fillRect(-3, -3, 6, 6);
      
      // åº§æ¨™ãƒ©ãƒ™ãƒ«
      ctx.fillStyle = 'black';
      ctx.font = '12px Arial';
      ctx.fillText('(0,0)', 5, 15);
      ctx.fillText('Xè»¸', canvas.width - 30, 15);
      ctx.fillText('Yè»¸', 5, canvas.height - 5);
    }

    // ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«å‹•ä½œ
    function demonstrateState() {
      const canvas = document.getElementById('stateCanvas');
      const ctx = canvas.getContext('2d');
      
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      // æœ€åˆã«èµ¤ã‚’è¨­å®š
      ctx.fillStyle = 'red';
      ctx.fillRect(10, 50, 50, 50);
      
      // è‰²ã‚’å¤‰ãˆãšã«æ¬¡ã®çŸ©å½¢ï¼ˆã¾ã èµ¤ï¼‰
      ctx.fillRect(70, 50, 50, 50);
      
      // é’ã«å¤‰æ›´
      ctx.fillStyle = 'blue';
      ctx.fillRect(130, 50, 50, 50);
      
      // ã¾ã é’ã®ã¾ã¾
      ctx.fillRect(190, 50, 50, 50);
    }

    // ãƒ‘ã‚¹æç”»
    function drawWithPath() {
      const canvas = document.getElementById('pathCanvas');
      const ctx = canvas.getContext('2d');
      
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      // ä¸‰è§’å½¢
      ctx.beginPath();
      ctx.moveTo(50, 50);
      ctx.lineTo(150, 50);
      ctx.lineTo(100, 100);
      ctx.closePath();
      ctx.fillStyle = 'lightblue';
      ctx.fill();
      ctx.strokeStyle = 'blue';
      ctx.stroke();
      
      // æ˜Ÿå‹
      ctx.beginPath();
      for (let i = 0; i < 5; i++) {
        const angle = (i * Math.PI * 4) / 5;
        const x = 220 + Math.cos(angle) * 30;
        const y = 75 + Math.sin(angle) * 30;
        if (i === 0) ctx.moveTo(x, y);
        else ctx.lineTo(x, y);
      }
      ctx.closePath();
      ctx.fillStyle = 'gold';
      ctx.fill();
      ctx.strokeStyle = 'orange';
      ctx.stroke();
    }

    function clearPath() {
      const canvas = document.getElementById('pathCanvas');
      const ctx = canvas.getContext('2d');
      ctx.clearRect(0, 0, canvas.width, canvas.height);
    }

    // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
    let x = 0;
    let animationId;

    function animate() {
      const canvas = document.getElementById('animCanvas');
      const ctx = canvas.getContext('2d');
      
      // ã‚¯ãƒªã‚¢
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      // ä½ç½®æ›´æ–°
      x += 2;
      if (x > canvas.width) x = -50;
      
      // æç”»
      ctx.fillStyle = 'red';
      ctx.fillRect(x, 50, 50, 50);
      
      // æ¬¡ãƒ•ãƒ¬ãƒ¼ãƒ 
      animationId = requestAnimationFrame(animate);
    }

    function startAnimation() {
      if (animationId) cancelAnimationFrame(animationId);
      animate();
    }

    function stopAnimation() {
      if (animationId) {
        cancelAnimationFrame(animationId);
        animationId = null;
      }
    }

    // ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–æç”»
    let isDrawing = false;
    let lastX = 0;
    let lastY = 0;

    function initDrawCanvas() {
      const canvas = document.getElementById('drawCanvas');
      const ctx = canvas.getContext('2d');
      const colorSelect = document.getElementById('colorSelect');

      canvas.addEventListener('mousedown', (e) => {
        isDrawing = true;
        const rect = canvas.getBoundingClientRect();
        lastX = e.clientX - rect.left;
        lastY = e.clientY - rect.top;
      });

      canvas.addEventListener('mousemove', (e) => {
        if (!isDrawing) return;
        
        const rect = canvas.getBoundingClientRect();
        const currentX = e.clientX - rect.left;
        const currentY = e.clientY - rect.top;
        
        ctx.beginPath();
        ctx.moveTo(lastX, lastY);
        ctx.lineTo(currentX, currentY);
        ctx.strokeStyle = colorSelect.value;
        ctx.lineWidth = 2;
        ctx.lineCap = 'round';
        ctx.stroke();
        
        lastX = currentX;
        lastY = currentY;
      });

      canvas.addEventListener('mouseup', () => {
        isDrawing = false;
      });

      canvas.addEventListener('mouseout', () => {
        isDrawing = false;
      });
    }

    function clearDraw() {
      const canvas = document.getElementById('drawCanvas');
      const ctx = canvas.getContext('2d');
      ctx.clearRect(0, 0, canvas.width, canvas.height);
    }

    // åˆæœŸåŒ–
    document.addEventListener('DOMContentLoaded', () => {
      initDrawCanvas();
    });
  </script>
</body>
</html>